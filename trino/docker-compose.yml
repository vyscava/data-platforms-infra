name: trino-stack
services:
  trino-coordinator:
    hostname: trino-coordinator
    image: trinodb/trino:455@sha256:b5cb6e5705e7efd4946eb42a32bfbad754e739ca8de59b183dc7bbc1889e19be
    container_name: trino-coordinator
    restart: unless-stopped
    ports:
      - '8080:8080'
    volumes:
      - /home/admin/trino/coordinator/etc/trino:/etc/trino
      - /home/admin/trino/catalog_configuration:/etc/trino/catalog
      - /home/admin/trino/shared:/etc/trino/conf
    deploy:
      resources:
        limits:
          cpus: "2"
          memory: 2G
    # command: sleep infinity

  trino-worker:
    image: trinodb/trino:455@sha256:b5cb6e5705e7efd4946eb42a32bfbad754e739ca8de59b183dc7bbc1889e19be
    restart: unless-stopped
    volumes:
      - /home/admin/trino/worker/etc/trino:/etc/trino
      - /home/admin/trino/catalog_configuration:/etc/trino/catalog
      - /home/admin/trino/shared:/etc/trino/conf
    deploy:
      mode: replicated
      replicas: 2
      resources:
        limits:
          cpus: "2"
          memory: 3G
